$(function(){var e=$(".J_userEmail"),n=$(".J_password"),o=$(".J_password_confirm"),i=$(".J_getCode"),t=$(".J_code"),a=$(".J_findpsw_btn"),r=function(e){var n=/^1[3|4|5|8]\d{9}$/,o=/^[a-z0-9_-]{6,18}$/,i=/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/,t="";return{getMsg:function(){return t},phone:function(e){return n.test(e)?!0:(t="用户名输入错误，请输入11位手机号",!1)},email:function(e){return i.test(e)?!0:(t="邮箱输入格式有误，请输入正确的邮箱",!1)},psw:function(e){return o.test(e)?!0:(t="密码验证不通过，请输入6到18位的字母数字",!1)}}};i.on("click",function(n){var o=e.val(),t="02",a=r(),s=i;return a.email(o)?$.ajax({type:"Post",url:window.location.origin+"/uoffice/createVerificationCode",data:"loginName="+o+"&type="+t,success:function(e){alert(e.message),"200"===e.code&&time(s,60)}}):alert(a.getMsg()),!1}),a.on("click",function(){var i=e.val(),a=n.val(),s=t.val(),c=o.val(),l=($(".J_findpsw_form"),r());return a===c?l.email(i)&&l.psw(a)?$.ajax({type:"POST",url:window.location.origin+"/uoffice/findPassword",data:"loginName="+i+"&verificationCode="+s+"&newPassword="+a,success:function(e){"200"===e.code?(alert(e.message),setTimeout(function(){window.location.href=window.location.origin+"/uoffice/view/screen/login/login.jsp"},3e3)):alert(e.message)}}):alert(l.getMsg()):alert("两次密码输入不相同，请检查后再提交"),!1})});
